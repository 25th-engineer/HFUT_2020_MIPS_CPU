[toc]

# 1	课程设计概述
## 1.1	设计目的
<p><font size = 4 face = 宋体>
&emsp;&emsp;计算机组成原理是计算机专业的核心基础课。该课程力图以“培养学生现代计算机系统设计能力”为目标，贯彻“强调软/硬件关联与协同、以CPU设计为核心/层次化系统设计的组织思路，有效地增强对学生的计算机系统设计与实现能力的培养”。课程设计是完成该课程并进行了多个单元实验后，综合利用所学的理论知识，并结合在单元实验中所积累的计算机部件设计和调试方法，设计出一台具有一定规模的指令系统的简单计算机系统。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;课程设计属于设计型实验，不仅锻炼学生简单计算机系统的设计能力，而且通过进行中央处理器底层电路的实现、故障分析与定位、系统调试等环节的综合锻炼，进一步提高学生分析和解决问题的能力。
</size>
</p>

## 1.2	设计任务
<p><font size = 4 face = 宋体>
&emsp;&emsp;本课程设计的目标总体目标是设计并实现一个满足以下条件的多周期和流水CPU：<br>
&emsp;&emsp;1）若干段流水、可以处理冲突；<br>
&emsp;&emsp;2）三种类型的指令若干条；<br>
&emsp;&emsp;3）MIPS、ARM、RISC-V等类型CPU都可以；<br>
&emsp;&emsp;4）下载到FPGA上进行验证（选）。<br>
</size>
</p>

## 1.3	设计要求
<p><font size = 4 face = 宋体>
&emsp;&emsp;1）根据课程设计指导书的要求，制定出设计方案；<br>
&emsp;&emsp;2）分析指令系统格式，指令系统功能；<br>
&emsp;&emsp;3）根据指令系统构建基本功能部件，主要数据通路；<br>
&emsp;&emsp;4）根据功能部件及数据通路连接，分析所需要的控制信号以及这些控制信号的有效形式；<br>
&emsp;&emsp;5）调试、数据分析、验收检查；<br>
&emsp;&emsp;6）课程设计报告和总结。<br>
</size>
</p>

## 1.4	技术指标
&emsp;&emsp;1）支持表1.4.1所示的50条32位MIPS指令；<br>
&emsp;&emsp;2支持5段流水机制，可处理数据冒险，结构冒险，分支冒险；<br>
&emsp;&emsp;3）能运行由自己所设计的指令系统构成的一段测试程序，测试程序应能涵盖所有指令，程序执行功能正确；<br>
&emsp;&emsp;4）运行测试程序所耗费的时钟周期数以及每种类型指令执行所需时间。<br>

<table border=1 cellpadding=0 cellspacing=0 width=1184 style='border-collapse:
 collapse;table-layout:fixed;width:888pt'>
 <caption><font size=3>表 1.4.1 MIPS-C3指令集</font></caption>
 <col class=xl67 width=64 style='width:48pt'>
 <col width=64 style='width:48pt'>
 <col width=402 style='mso-width-source:userset;mso-width-alt:14279;width:301pt'>
 <col width=190 style='mso-width-source:userset;mso-width-alt:6769;width:143pt'>
 <col width=74 style='mso-width-source:userset;mso-width-alt:2616;width:55pt'>
 <col width=53 style='mso-width-source:userset;mso-width-alt:1877;width:40pt'>
 <col width=61 style='mso-width-source:userset;mso-width-alt:2161;width:46pt'>
 <col width=64 span=3 style='width:48pt'>
 <col width=84 style='mso-width-source:userset;mso-width-alt:2986;width:63pt'>
 <col width=64 style='width:48pt'>
 <col width=100 style='mso-width-source:userset;mso-width-alt:3555;width:75pt'>
 <tr height=62 style='height:46.8pt'>
  <td height=62 class=xl69 width=64 style='height:46.8pt;width:48pt'>序号</td>
  <td class=xl69 width=64 style='border-left:none;width:48pt'>指令</td>
  <td class=xl69 width=402 style='border-left:none;width:301pt'>指令说明</td>
  <td class=xl69 width=190 style='border-left:none;width:143pt'>指令格式</td>
  <td class=xl69 width=74 style='border-left:none;width:55pt'>OP<br>
    31-26<br>
    </td>
  <td class=xl69 width=53 style='border-left:none;width:40pt'>RS<br>
    25-21<br>
    </td>
  <td class=xl69 width=61 style='border-left:none;width:46pt'>RT<br>
    20-16<br>
    </td>
  <td class=xl69 width=64 style='border-left:none;width:48pt'>RD<br>
    15-11<br>
    </td>
  <td class=xl69 width=64 style='border-left:none;width:48pt'>SA<br>
    10-6<br>
    </td>
  <td class=xl69 width=64 style='border-left:none;width:48pt'>FUNCT<br>
    5-0<br>
    </td>
  <td class=xl69 width=84 style='border-left:none;width:63pt'>指令码<br>
    16进制</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;width:48pt'>1</td>
  <td class=xl65 width=64 style='border-left:none;width:48pt'>addi</td>
  <td class=xl66 width=402 style='border-left:none;width:301pt'>加立即数</td>
  <td class=xl65 width=190 style='border-left:none;width:143pt'>addi rt, rs,
  immediate</td>
  <td class=xl65 width=74 style='border-left:none;width:55pt'>001000</td>
  <td class=xl65 width=53 style='border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-left:none;width:48pt'>100000</td>
  <td class=xl65 width=84 style='border-left:none;width:63pt'>20000000</td>
 </tr>
 <tr height=42 style='height:31.2pt'>
  <td height=42 class=xl65 width=64 style='height:31.2pt;border-top:none;
  width:48pt'>2</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>addiu</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>加立即数（无符号）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>addiu
  rd, rs, immediate</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>001001</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>24000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>3</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>andi</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>立即数与</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>andi
  rt, rs, immediate</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>001100</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>30000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>4</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>ori</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>或立即数</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>ori
  rt, rs, immediate</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>001101</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>34000000</td>
 </tr>
 <tr height=42 style='height:31.2pt'>
  <td height=42 class=xl65 width=64 style='height:31.2pt;border-top:none;
  width:48pt'>5</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>sltiu</td>
  <td class=xl68 width=402 style='border-top:none;border-left:none;width:301pt'>小于立即数置1（无符号）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>sltiu
  rt, rs, immediate</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>001011</td>
  <td class=xl68 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl68 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl68 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl68 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl68 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>2C000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>6</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>lui</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>立即数加载高位</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>lui
  rt, immediate</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>001111</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>00000</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>3C000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>7</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>xori</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>异或（立即数）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>xori
  rt, rs, immediate</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>001110</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>000000</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>38000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>8</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>slti</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>小于置
  1（立即数）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>slti
  rt, rs, immediate</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>001010</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>000000</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>28000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>9</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>addu</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>加（无符号）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>addu
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>100001</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000021</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>10</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>and</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>与</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>and
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>100100</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000024</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>11</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>beq</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>相等时分支</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>beq
  rs, rt, offset</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000100</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>10000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>12</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>bne</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>不等时分支</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>bne
  rs, rt, offset</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000101</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>14000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>13</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>j</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>跳转</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>j
  target</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000010</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>08000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>14</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>jal</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>跳转并链接</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>jal
  target</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000011</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>0C000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>15</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>jr</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>跳转至寄存器所指地址</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>jr
  rs</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>001000</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000009</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>16</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>lw</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>取字</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>lw
  rt, offset(base)</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>100011</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>8C000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>17</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>xor</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>异或</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>xor
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>100110</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000026</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>18</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>nor</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>或非</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>nor
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>100111</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000027</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>19</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>or</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>或</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>or
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>100101</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000025</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>20</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>sll</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>逻辑左移</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>sll
  rd, rt, sa</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>00000</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>000000</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>21</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>sllv</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>逻辑左移（位数可变）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>sllv
  rd, rt, rs</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>000100</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000004</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>22</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>sltu</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>小于置1（无符号）<span
  style='mso-spacerun:yes'> </span></td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>sltu
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>101011</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>0000002B</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>23</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>sra</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>算数右移</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>sra
  rd, rt, sa</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>00000</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>000011</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000003</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>24</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>srl</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>逻辑右移</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>srl
  rd, rt, sa</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>00000</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>000010</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000002</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>25</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>subu</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>减（无符号）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>sub
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>100010</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000022</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>26</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>sw</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>存字</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>sw
  rt, offset(base)</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>101011</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>AC000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>27</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>add</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>加</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>add
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>100000</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000020</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>28</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>sub</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>减</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>sub
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>100010</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000022</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>29</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>slt</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>小于置
  1</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>slt
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>101010</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>0000002A</td>
 </tr>
 <tr height=19 style='height:14.4pt'>
  <td rowspan=2 height=38 class=xl65 width=64 style='height:28.8pt;border-top:
  none;width:48pt'>30</td>
  <td rowspan=2 class=xl65 width=64 style='border-top:none;width:48pt'>srlv</td>
  <td rowspan=2 class=xl66 width=402 style='border-top:none;width:301pt'>逻辑右移（位数可变）</td>
  <td rowspan=2 class=xl65 width=190 style='border-top:none;width:143pt'>srlv
  rd, rt, rs</td>
  <td rowspan=2 class=xl65 width=74 style='border-top:none;width:55pt'>000000</td>
  <td rowspan=2 class=xl65 width=53 style='border-top:none;width:40pt'>&nbsp;</td>
  <td rowspan=2 class=xl65 width=61 style='border-top:none;width:46pt'>&nbsp;</td>
  <td rowspan=2 class=xl65 width=64 style='border-top:none;width:48pt'>&nbsp;</td>
  <td rowspan=2 class=xl65 width=64 style='border-top:none;width:48pt'>00000</td>
  <td rowspan=2 class=xl65 width=64 style='border-top:none;width:48pt'>000110</td>
  <td rowspan=2 class=xl65 width=84 style='border-top:none;width:63pt'>00000006</td>
 </tr>
 <tr height=19 style='height:14.4pt'>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>31</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>srav</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>算数右移（位数可变）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>srav
  rd, rt, rs</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>000111</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000007</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>32</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>clz</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>前导零计数</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>clz
  rd, rs</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>011100</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>100000</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>70000020</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>33</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>divu</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>除（无符号）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>divu
  rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>011011</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>0000001B</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>34</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>eret</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>异常返回</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>eret</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>010000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>10000</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>011000</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>42000018</td>
 </tr>
 <tr height=42 style='height:31.2pt'>
  <td height=42 class=xl65 width=64 style='height:31.2pt;border-top:none;
  width:48pt'>35</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>jalr</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>跳转至寄存器所指地址，返回地址保存在R31这个寄存器</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>jalr
  rs</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>001001</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000008</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>36</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>lb</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>取字节</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>lb
  rt, offset(base)</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>100000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>80000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>37</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>lbu</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>取字节（无符号）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>lbu
  rt, offset(base)</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>100100</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>90000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>38</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>lhu</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>取半字（无符号）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>lhu
  rt, offset(base)</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>100101</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>94000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>39</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>sb</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>存字节</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>sb
  rt, offset(base)</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>101000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>A0000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>40</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>sh</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>存半字</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>sh
  rt, offset(base)</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>101001</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>A4000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>41</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>lh</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>取半字</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>lh
  rt, offset(base)</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>100001</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>84000000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>42</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>mfhi</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>读
  Hi 寄存器</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>mfhi
  rd</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>00000</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>010000</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000010</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>43</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>mflo</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>读
  Lo 寄存器</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>mflo
  rd</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>00000</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>010010</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000012</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>44</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>mthi</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>写
  Hi 寄存器</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>mthi
  rd</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>010001</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000011</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>45</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>mtlo</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>写
  Lo 寄存器</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>mtlo
  rd</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>010011</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000013</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>46</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>mul</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>乘</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>mul
  rd, rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>011100</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>000010</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>70000002</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>47</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>mult</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>字相乘</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>mult
  rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>011000</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000018</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>48</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>multu</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>乘（无符号）</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>multu
  rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>011001</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>00000019</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>49</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>bgez</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>大于等于
  0 时分支</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>bgez
  rs, offset</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000001</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>00001</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>&nbsp;</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>04010000</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=64 style='height:15.6pt;border-top:none;
  width:48pt'>50</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>div</td>
  <td class=xl66 width=402 style='border-top:none;border-left:none;width:301pt'>除</td>
  <td class=xl65 width=190 style='border-top:none;border-left:none;width:143pt'>div
  rs, rt</td>
  <td class=xl65 width=74 style='border-top:none;border-left:none;width:55pt'>000000</td>
  <td class=xl65 width=53 style='border-top:none;border-left:none;width:40pt'>&nbsp;</td>
  <td class=xl65 width=61 style='border-top:none;border-left:none;width:46pt'>&nbsp;</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>00000</td>
  <td class=xl65 width=64 style='border-top:none;border-left:none;width:48pt'>011010</td>
  <td class=xl65 width=84 style='border-top:none;border-left:none;width:63pt'>0000001A</td>
 </tr>
</table>

# 2	总体方案设计
## 2.1	MIPS体系结构
<p><font size = 4 face = 宋体>&emsp;&emsp;MIPS是RISC处理器中的一种。MIPS即无内部互锁流水线的微处理器（Microprocessor without Interlocked Piped Stages），其设计机制是尽量避免处理器中流水线上各种相关问题，使得程序指令可以尽量不停顿的执行。可以说，MIPS是为了流水线而生的，这也是本设计选择MIPS作为目标CPU架构的主要原因。接下来介绍与MIPS有关的一些基本概念。
&emsp;&emsp;
</size>
</p>

### 2.1.1	MIPS寄存器
<p><font size = 4 face = 宋体>
&emsp;&emsp;MIPS寄存器主要包括：通用寄存器、特殊寄存器、浮点寄存器。本设计实现了前两者。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>1）MIPS通用寄存器</b>
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;MIPS32体系结构总共实现了32个32比特的通用寄存器，这些寄存器可供指令使用，第0号寄存器到第31号寄存器。其中，只有两个寄存器较为特殊：第0号通用寄存器不论指令向里面写入什么值读出的总是0，而第31号通用寄存器通常被子程序调用指令用来存储返回地址。表2.1.1給出了MIPS通用寄存器的命名规则。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=733 style='border-collapse:
 collapse;table-layout:fixed;width:550pt'>
 <caption><font size=3>表 2.1.1 MIPS通用寄存器命名规则</font></caption>
 <col width=106 style='mso-width-source:userset;mso-width-alt:3754;width:79pt'>
 <col width=129 style='mso-width-source:userset;mso-width-alt:4579;width:97pt'>
 <col width=498 style='mso-width-source:userset;mso-width-alt:17720;width:374pt'>
 <tr height=23 style='height:17.4pt'>
  <td height=23 class=xl65 width=106 style='height:17.4pt;width:79pt'>寄存器编号</td>
  <td class=xl65 width=129 style='border-left:none;width:97pt'>助记符</td>
  <td class=xl65 width=498 style='border-left:none;width:374pt'>用途</td>
 </tr>
 <tr height=23 style='height:17.4pt'>
  <td height=23 class=xl66 width=106 style='height:17.4pt;border-top:none;
  width:79pt'>0</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>zero</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>固定为0</td>
 </tr>
 <tr height=23 style='height:17.4pt'>
  <td height=23 class=xl66 width=106 style='height:17.4pt;border-top:none;
  width:79pt'>1</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>at</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>编译暂存寄存器，为编译器保留</td>
 </tr>
 <tr height=23 style='height:17.4pt'>
  <td height=23 class=xl66 width=106 style='height:17.4pt;border-top:none;
  width:79pt'>2~3</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>v0,v1</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>用来存放子程序的返回值（非浮点）</td>
 </tr>
 <tr height=23 style='height:17.4pt'>
  <td height=23 class=xl66 width=106 style='height:17.4pt;border-top:none;
  width:79pt'>4~7</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>a0~a3</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>用来传递子程序的前四个参数（非浮点）</td>
 </tr>
 <tr height=23 style='height:17.4pt'>
  <td height=23 class=xl66 width=106 style='height:17.4pt;border-top:none;
  width:79pt'>8~15</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>t0~t7，t8,t9</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>暂存寄存器，离开时子函数时不需要对其进行存储和恢复</td>
 </tr>
 <tr height=46 style='height:34.8pt'>
  <td height=46 class=xl66 width=106 style='height:34.8pt;border-top:none;
  width:79pt'>16~23</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>s0~s7</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>子函数寄存变量;改变这些寄存器值的子程序必须存储旧的值并在退出前恢复，对调用程序来说值不变</td>
 </tr>
 <tr height=23 style='height:17.4pt'>
  <td height=23 class=xl66 width=106 style='height:17.4pt;border-top:none;
  width:79pt'>26,27</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>k0,k1</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>为中断/陷阱指令保留</td>
 </tr>
 <tr height=46 style='height:34.8pt'>
  <td height=46 class=xl66 width=106 style='height:34.8pt;border-top:none;
  width:79pt'>28</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>gp</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>全局指针;某些对时间敏感的系统可以使用该寄存器为static或extern变量提供快速的寻址方式</td>
 </tr>
 <tr height=23 style='height:17.4pt'>
  <td height=23 class=xl66 width=106 style='height:17.4pt;border-top:none;
  width:79pt'>29</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>sp</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>堆栈指针</td>
 </tr>
 <tr height=23 style='height:17.4pt'>
  <td height=23 class=xl66 width=106 style='height:17.4pt;border-top:none;
  width:79pt'>30</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>s8/fp</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>子程序用它来作帧指针</td>
 </tr>
 <tr height=23 style='height:17.4pt'>
  <td height=23 class=xl66 width=106 style='height:17.4pt;border-top:none;
  width:79pt'>31</td>
  <td class=xl66 width=129 style='border-top:none;border-left:none;width:97pt'>ra</td>
  <td class=xl67 width=498 style='border-top:none;border-left:none;width:374pt'>子程序返回地址</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>2）MIPS特殊寄存器
</b>
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;MIPS体系结构定义了以下3个特殊寄存器：<br>
&emsp;&emsp;i. PC：程序计数器，保存当前执行程序的地址；<br>
&emsp;&emsp;ii. LO：保存乘法指令低位结果或除法指令的商；<br>
&emsp;&emsp;iii. HI：保存乘法指令高位结果或除法指令的余数。<br>
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>3）MIPS浮点寄存器
</b>
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;MIPS体系结构还定义了以下3种浮点寄存器：<br>
&emsp;&emsp;i. 32个32比特的浮点寄存器(FPRs)；<br>
&emsp;&emsp;ii. 5个FPU控制寄存器用于识别和控制FPU；<br>
&emsp;&emsp;iii. 8个浮点条件代码，它们是FCSR寄存器中的一部分。<br>
&emsp;&emsp;浮点寄存器的实现比较复杂且不在本次课程设计的任务要求中，故本设计没有对其进行实现。<br>
</size>
</p>

### 2.1.2	MIPS指令集
<p><font size = 4 face = 宋体>
&emsp;&emsp;每一条MIPS指令的长度是32位。MIPS指令集包括三种类型的指令：寄存器类型指令，立即数类型指令和跳转类型指令1B7。寄存器类型指令只有通用寄存器之间的操作，不包含立即数；立即数类型指令是通用寄存器和16位立即数之间的操作；而跳转类型指令包含一个26位的指令地址索引，可以进行大范围绝对地址跳转。MIPS架构这种精简指令集处理器在很大程度上减少指令数目并且极大的简化了指令的译码和执行，程序编译器还可以利用若干个简单的指令合理的组合，形成更加复杂的操作。如表2.1.2.1所示为MIPS处理器的指令格式，表2.1.2.1是对指令中各个域的说明。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=456 style='border-collapse:
 collapse;table-layout:fixed;width:342pt'>
 <caption><font size=3>表 2.1.2.1 MIPS指令格式</font></caption>
 <col width=64 style='width:48pt'>
 <col width=72 style='mso-width-source:userset;mso-width-alt:2560;width:54pt'>
 <col width=64 span=5 style='width:48pt'>
 <tr height=19 style='height:14.4pt'>
  <td height=19 width=64 style='height:14.4pt;width:48pt'></td>
  <td class=xl65 width=72 style='width:54pt'>31<span
  style='mso-spacerun:yes'>          </span>26</td>
  <td class=xl65 width=64 style='width:48pt'>25<span
  style='mso-spacerun:yes'>          </span>21</td>
  <td class=xl65 width=64 style='width:48pt'>20<span
  style='mso-spacerun:yes'>          </span>16</td>
  <td class=xl65 width=64 style='width:48pt'>15<span
  style='mso-spacerun:yes'>           </span>11</td>
  <td class=xl65 width=64 style='width:48pt'>10<span
  style='mso-spacerun:yes'>            </span>6</td>
  <td class=xl65 width=64 style='width:48pt'>5<span
  style='mso-spacerun:yes'>              </span>0</td>
 </tr>
 <tr height=19 style='height:14.4pt'>
  <td height=19 class=xl65 style='height:14.4pt'>R类型</td>
  <td class=xl65>opcode</td>
  <td class=xl65>rs</td>
  <td class=xl65>rt</td>
  <td class=xl65>rd</td>
  <td class=xl65>sa</td>
  <td class=xl65>funct</td>
 </tr>
 <tr height=19 style='height:14.4pt'>
  <td height=19 class=xl65 style='height:14.4pt'></td>
  <td class=xl65></td>
  <td class=xl65></td>
  <td class=xl65></td>
  <td class=xl65></td>
  <td class=xl65></td>
  <td class=xl65></td>
 </tr>
 <tr height=19 style='height:14.4pt'>
  <td height=19 class=xl65 style='height:14.4pt'></td>
  <td class=xl65>31<span style='mso-spacerun:yes'>          </span>26</td>
  <td class=xl65>25<span style='mso-spacerun:yes'>          </span>21</td>
  <td class=xl65>20<span style='mso-spacerun:yes'>          </span>16</td>
  <td class=xl65>15<span style='mso-spacerun:yes'>           </span>11</td>
  <td class=xl65>10<span style='mso-spacerun:yes'>            </span>6</td>
  <td class=xl65>5<span style='mso-spacerun:yes'>              </span>0</td>
 </tr>
 <tr height=19 style='height:14.4pt'>
  <td height=19 class=xl65 style='height:14.4pt'>I类型</td>
  <td class=xl65>opcode</td>
  <td class=xl65>rs</td>
  <td class=xl65>rt</td>
  <td colspan=3 class=xl65>immediate</td>
 </tr>
 <tr height=19 style='height:14.4pt'>
  <td height=19 class=xl65 style='height:14.4pt'></td>
  <td class=xl65></td>
  <td class=xl65></td>
  <td class=xl65></td>
  <td class=xl65></td>
  <td class=xl65></td>
  <td class=xl65></td>
 </tr>
 <tr height=19 style='height:14.4pt'>
  <td height=19 class=xl65 style='height:14.4pt'></td>
  <td class=xl65>31<span style='mso-spacerun:yes'>          </span>26</td>
  <td class=xl65>25<span style='mso-spacerun:yes'>          </span>21</td>
  <td class=xl65>20<span style='mso-spacerun:yes'>          </span>16</td>
  <td class=xl65>15<span style='mso-spacerun:yes'>           </span>11</td>
  <td class=xl65>10<span style='mso-spacerun:yes'>            </span>6</td>
  <td class=xl65>5<span style='mso-spacerun:yes'>              </span>0</td>
 </tr>
 <tr height=19 style='height:14.4pt'>
  <td height=19 class=xl65 style='height:14.4pt'>J类型</td>
  <td class=xl65>opcode</td>
  <td colspan=5 class=xl65>instr_index</td>
 </tr>
</table>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 2.1.2.2 MIPS指令域说明</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl65 width=96 style='height:15.6pt;width:72pt'>域</td>
  <td class=xl65 width=515 style='border-left:none;width:386pt'>说明</td>
 </tr>
 <tr height=22 style='height:16.2pt'>
  <td height=22 class=xl66 style='height:16.2pt;border-top:none'>opcode</td>
  <td class=xl66 style='border-top:none;border-left:none'>6比特指令主操作码</td>
 </tr>
 <tr height=22 style='height:16.2pt'>
  <td height=22 class=xl66 style='height:16.2pt;border-top:none'>rs</td>
  <td class=xl66 style='border-top:none;border-left:none'>5比特源寄存器索引</td>
 </tr>
 <tr height=22 style='height:16.2pt'>
  <td height=22 class=xl66 style='height:16.2pt;border-top:none'>rt</td>
  <td class=xl66 style='border-top:none;border-left:none'>5比特源/目的寄存器索引</td>
 </tr>
 <tr height=22 style='height:16.2pt'>
  <td height=22 class=xl66 style='height:16.2pt;border-top:none'>rd</td>
  <td class=xl66 style='border-top:none;border-left:none'>5比特目的寄存器索引</td>
 </tr>
 <tr height=22 style='height:16.2pt'>
  <td height=22 class=xl66 style='height:16.2pt;border-top:none'>sa</td>
  <td class=xl66 style='border-top:none;border-left:none'>5比特移位偏移量</td>
 </tr>
 <tr height=22 style='height:16.2pt'>
  <td height=22 class=xl66 style='height:16.2pt;border-top:none'>funct</td>
  <td class=xl66 style='border-top:none;border-left:none'>6比特函数功能码，用来指示寄存器指令的具体功能</td>
 </tr>
 <tr height=22 style='height:16.2pt'>
  <td height=22 class=xl66 style='height:16.2pt;border-top:none'>immediate</td>
  <td class=xl66 style='border-top:none;border-left:none'>16比特的立即数，用做逻辑指令操作数、算术指令操作数、存储器访问</td>
 </tr>
 <tr height=43 style='mso-height-source:userset;height:32.4pt'>
  <td height=43 class=xl68 style='height:32.4pt;border-top:none'>instr_index</td>
  <td class=xl69 width=515 style='border-top:none;border-left:none;width:386pt'>指令的地址偏移量和分支指令的跳转目的偏移量<br>
    26比特的跳转索引，指示跳转指令的索引</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;MIPS32指令分为如下几类：<br>
&emsp;&emsp;1）存储器访问指令：用于在存储器和通用寄存器之间传递数据。访问存储器的地址是通用寄存器的值和16位有符号立即数相加的值，存储器访问指令都属于立即数类型指令。<br>
&emsp;&emsp;2）运算指令：完成定点的算术、逻辑、移位等运算操作。操作数据既可以是通用寄存器的值，也可以是16位立即数。运算指令可以是寄存器类型或立即数类型。<br>
&emsp;&emsp;3）分支跳转指令：可以改变程序指令的顺序执行。分支指令用PC寄存器的值加上16位立即数左移2位指向目的地址。跳转指令把指令中程序索引或者某个通用寄存器的内容写入PC。分支指令属于立即数类型，跳转指令可以是寄存器类型或跳转类型。<br>
&emsp;&emsp;4）系统协处理器指令：进行系统协处理器寄存器的读写操作。<br>
</size>
</p>

### 2.1.3	MIPS五级流水线
<p><font size = 4 face = 宋体>
&emsp;&emsp;流水线是指将计算机指令处理过程拆分为多个步骤，并通过多个硬件处理单元并行执行来加快指令执行速度。本设计的目标是MIPS五级流水线，其各个阶段的主要工作如下：<br>
&emsp;&emsp;取指阶段（Instruction Fetch，IF）：从指令存储器读出指令，同时确定下一条指令地址。<br>
&emsp;&emsp;译码阶段（Instruction Decode，ID）：对指令进行译码，从通用寄存器中读出要使用的寄存器的值，如果指令中含有立即数，那么还要将立即数进行符号扩展或无符号扩展。如果是转移指令，并且满足转移条件，那么给出转移目标，作为新的指令地址。<br>
&emsp;&emsp;执行阶段（Execute，EX）：按照译码阶段给出的操作数、运算类型，进行运算，给出运算结果。如果是Load/Store指令，那么还会计算Load/Store的目标地址。<br>
&emsp;&emsp;访存阶段（Memory，MEM）：如果是Load/Store指令，那么在此阶段会访问数据存储器，反之，只是将执行阶段的结果向下传递到回写阶段。同时，在此阶段还要判断是否有异常需要处理，如果有，那么会清除流水线，然后转移到异常处理例程入口地址处继续执行<br>
&emsp;&emsp;回写阶段（Write Back，WB）：将运算结果保存到目标寄存器。<br>
&emsp;&emsp;除上述内容外，MIPS架构还包括：MIPS协处理器0以及MIPS中断与异常等，因本设计并未涉及相关内容，故不作介绍。<br>
</size>
</p>

## 2.2	流水CPU设计
### 2.2.1	总体设计
<p><font size = 4 face = 宋体>
&emsp;&emsp;本设计拟实现的CPU是全冒险处理的五阶段CPU，下面对需要解决的问题进行简单地描述。<br>
&emsp;&emsp;单周期时即使指令之后的执行不再需要使用前面用到的部件，还仍然霸占着那些部件。合理而高效的做法自然是让指令执行时不再需要使用前面的部件时，应该调入下一条指令执行。所以关键问题是：如何将单周期数据通路进行划分，当指令未执行完而新的指令已经调入时必须使用寄存器保存当前指令的执行信息，如何设置流水寄存器内容。此外，程序在流水线上的执行还会带来一些“流水线专属”的问题，如下所示。<br>
&emsp;&emsp;i1. R2 <- R1 + R3<br>
&emsp;&emsp;i2. R4 <- R2 + R3<br>
&emsp;&emsp;第一条指令是计算一个值，并将其储存在R2，而第二个指令是使用这个值计算结果并储存在R4，但是在我们拿出第二步的操作数时，第一步的结果还未被储存。在如此情况下，得到的运算结果是不可预知的。这个问题即是所谓的“数据相关”，又称“数据冒险”，一般发生在指令乱序执行时，可能会发生读取数据与写入数据之间的时序与空间的相关性。数据相关又分三种情况：RAW、WAR、WAW。数据相关可以采用重定向的方法解决，真数据相关也就是RAW，只需要检测相邻指令读寄存器编号与写寄存器编号一致时就采用定向技术（旁路)，将正确的数据（还未来得及写回）通过新增的数据通路送到需要读该寄存器的地方。有一种特殊的数据相关：load-use冲突，并不能简单地重定向，有关冲突必需在ID阶段监测，否则会造成额外的硬件开销。除了数据相关，流水线中还存在结构相关与分支相关，前者指的是指的是在指令执行的过程中，由于硬件资源满足不了指令执行的要求，发生硬件资源冲突而产生的相关。比如：指令和数据都共享一个存储器，在某个时钟周期，流水线既要完成某条指令对存储器中数据的访问操作，又要完成后续的取指令操作，这样就会发生存储器访问冲突，产生结构相关。解决结构相关可以考虑采用哈佛结构：指令存储器和数据存储器分开（实际商用的处理器是分开的指令cache与数据cache）；后者指的是流水线中的分支指令或者其他需要改写PC的指令造成的相关。最后介绍分支相关的解决办法，本设计采用静态分支预测中的预测失败的方法，当监测到分支指令时并不做特别的处理，等到分支成功或者失败的结果计算出来时，若是分支失败则分支指令和普通指令没有任何区别，一旦分支成功，就要清楚误取深度条指令，从新从分支地址出取出正确的指令。当解决上述所有问题后，本设计就实现了全冒险处理的五段流水CPU。<br>
</size>
</p>

### 2.2.2	流水接口部件设计
<p><font size = 4 face = 宋体>
&emsp;&emsp;如2.1.3节所述，在MIPS五段流水CPU上，指令的解释执行可以分为IF、ID、EX、MEM与WB五个阶段，且这五个阶段在不同的功能部件上执行，故可使五个子任务并发执行。流水寄存器中应该包含指令在后续解释执行阶段所需的所有信号，并且为了便于调试最好将PCPlus4、IR信号也全部传递。流水寄存器中传递的信号及在各段的使用情况如图2.2.2.1所示。从图2.2.2.1上可以看到：IF/ID寄存器中保存着PCPlus4和IR信号也全部传递信号，而ID/EX寄存器中包含着指令在EX执行所需要的全部信号以及指令在MEM和WB阶段需要的所有信号，EX/MEM寄存器包含着指令在MEM阶段执行所需要的全部信号以及指令在WB段执行的全部信号，MEM/WB寄存器则包含着指令在WB段执行所需要的全部信号，因此流水寄存器不仅需要包含指令在本段执行所需要的信号，还要将指令在后续阶段所需要的信号逐步传递给后续流水寄存器（相当于实现了控制器的复用。考虑到后面要实现流水线的停顿和指令的清空，流水寄存器中还需有使能信号和清零信号。
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911200154388.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 2.2.2.1 流水寄接口设计及信号传递示意</div>
</center>
<br>

## 2.3	数据转发流水线设计
<p><font size = 4 face = 宋体>
&emsp;&emsp;数据转发技术和重定向、旁路等所指的概念是一样的，是为了解决流水线中存在的RAW冲突。后面指令读寄存器编号和前面指令写寄存器编号相同时就会出现真数据相关，该问题存在的原因是执行结果未写回寄存器文件，后续指令就需要从寄存器文件中读取还未来得及写入的寄存器的值，但实际上这些需要写入的值都已经在数据通路中计算出来了，只是没有写回而已，故本设计的解决方法是：通过构建额外的数据旁路来将这些数据送到需要使用它们的地方，其原理如图2.3.1。
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911200410102.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 2.3.1 数据旁路示意</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;发生数据相关单元应该检测EX段读的寄存器编号（最多可能是两个)，与MEM和WB段指令写寄存器编号是否出现相同的情况，若出现，则数据冲突发生，所以需要将数据送到EX段对应位置，如果编号不相同，则正常执行，无需重定向。此处有两个问题需要注意，当读、写0号寄存器时，是不需要重定向的，因0号寄存器内容始终为0，一定不会出现数据冲突。如果读寄存器编号与MEM和WB段写寄存器编号均相同，应该重定向那个段的数据，显示应该重定向MEM段的的数据，因此MEM段的数据重定向具有更高的优先级，在实现的时候只需将输入端为MEM段数据的二路选择器放在后面即可。当上述问题解决后，数据转发流水线也就完成了，重定向具体实现如图2.3.2所示，流水寄存器信号在每段流转情况如图2.3.3所示。
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911200547529.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 2.3.2 流水寄接口设计与重定向实现</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911200659621.jpg">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 2.3.3 流水线寄存器信号在每段流转情况</div>
</center>
<br>


## 2.4	气泡式流水线设计
<p><font size = 4 face = 宋体>
&emsp;&emsp;这一节讨论load-use相关的问题。当连续两条指令依次执行，其中前一条是lw指令，而后面的一条指令的源寄存器编号与lw指令的目标寄存器编号相同时，会发生load-use冲突（RAW相关），如图2.4.1所示。此时，EX段的时延将是访问与ALU运算串行进行的时间，若在这种情况下仍然直接对指令进行重定向，在不发生错误的前提下，将会造成CPU频率降低，而这对于某些工作环境下的CPU是无法接受的，故本设计需要使用其它方法来解决这个问题。
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911200932104.jpg">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 2.4.1 load-use冲突示意图</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;为了解决load-use冲突，可以采用以下方法：当指令流水处于ID阶段时，需要插入气泡并暂停流水线，在重定向的检测上外加判定需要重定向的指令的前一条指令是否为lw指令即可。否则，将必须以增加硬件开销为基础来保证程序不出错。原因如下所述。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;假设在EX段检测，考虑以下情况：MEM段和WB段执行的指令都为lw指令，且两条lw指令的目的寄存器编号正好与EX段指令源寄存器编号相同，若插入一个气泡，WB段lw指令将被“挤走”，重定向的数据被丢失，而EX段指令又未从寄存器文件中取得正确的源寄存器值，因此就造成了程序执行可能出现错误。考虑在ID段检测load-use冲突，若在EX段与MEM段的指令出现与在EX段检测load-use冲突相同的情况，插入一个气泡并监测ID段及IF段流水线，那么最先的lw指令将会流动到WB段，将寄存器文件改造了为下降沿写入，故下一个时钟上升沿来临时，正确的源寄存器值将被锁入ID/EX流水寄存器中。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;综上，load-use冲突需要插入气泡并暂停流水线，且关于load-use冲突的检测必须在ID段。如图2.4.2所示为气泡流水线原理图。
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911201135487.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 2.4.2 气泡流水线原理图</div>
</center>
<br>

# 3	详细设计与实现
## 3.1	流水CPU实现
### 3.1.1	流水接口部件实现
<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>1）流水线部件内部接口
</b>
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;所谓的流水接口部件即是流水寄存器，由于本设计拟构建的是经典五段流水线，故共需要设置4个流水寄存器：IF/ID、ID/EX、EX/MEM、MEM/WB。这4个流水寄存器中应包含哪些信号用于向下一级寄存器传递，已在2.2.2节介绍过，在此不赘述，仅給出各个寄存器的内部接口图片。<br>
&emsp;&emsp;如图3.1.1.1所示为IF/ID段流水寄存器内部接口。
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911201620998.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 3.1.1.1 IF/ID 段流水寄存器内部</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如图3.1.1.2所示为ID/EX段流水寄存器内部接口。
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911201810184.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 3.1.1.2 ID/EX 段流水寄存器内部</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如图3.1.1.3所示为EX/MEM段流水寄存器内部接口。
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911201951426.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 3.1.1.3 EX/MEM 段流水寄存器内部</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如图3.1.1.4所示为MEM/WB段流水寄存器内部接口。
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911202211767.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 3.1.1.4 MEM/WB段流水寄存器内部接口</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>2)流水线部件Verilog实现
</b>
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;可以说，4个流水线寄存器的工作原理与实现方式大同小异，只是向其下一级传递的信号略有不同，此处仅給出IF/ID段流水寄存器的Verilog实现。
</size>
</p>


```
module RegD(								//IF/ID阶段的寄存器，根据IF的指令与PC确定ID时其对应值
  input               clk, rst, En,
  input       [31:0]  InstrF, PCPlus4F,		//IF（取指令）周期 时的指令 / 下一条指令的PC处
  output  reg [31:0]  InstrD, PCPlus4D		//ID（指令译码）周期 时的指令 / 下一条指令的PC处
  );
  
  initial
  begin
    InstrD <= 0;
    PCPlus4D <= 0;
  end
  
  always @(posedge clk)
    if (rst)
    begin
      InstrD <= 0;
      PCPlus4D <= 0;
    end
    else if (En)
    begin
      InstrD <= InstrF;
      PCPlus4D <= PCPlus4F;
    end
    else
    begin
      InstrD <= InstrD;
      PCPlus4D <= PCPlus4D;
    end
  
endmodule
```

### 3.1.2	数据通路实现
<p><font size = 4 face = 宋体>
&emsp;&emsp;本设计所构建五段流水线CPU的数据通路如图3.1.2.1所示。
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200911202731290.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 3.1.2.1 五段流水线CPU数据通路</div>
</center>
<br>

### 3.1.3	五段流水线寄存器模块
<p><font size = 4 face = 宋体>
&emsp;&emsp;根据数据通路，可以自然地得到Verilog实现的各个模块，下面給出本设计所构建五段流水线CPU的有关模块的定义接口。各个模块的接口的作用大同小异，不一一注释。<br>
&emsp;&emsp;如表3.1.3.1所示为RegD模块的定义接口。<br>
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.1.1 RegD模块定义接口</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>1</td>
  <td class=xl73 style='border-left:none'>clk</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>2</td>
  <td class=xl73 style='border-left:none'>rst</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>3</td>
  <td class=xl73 style='border-left:none'>En</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>4</td>
  <td class=xl73 style='border-left:none'>InstrF</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>IF（取指令）周期 时的指令</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>5</td>
  <td class=xl73 style='border-left:none'>PCPlus4F</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>IF（取指令）周期 时下一条指令的PC处</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>6</td>
  <td class=xl73 style='border-left:none'>InstrD</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>ID（指令译码）周期 时的指令</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.1.3.2所示为RegE模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.1.2 RegE模块定义接口</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>clk</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>rst</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>FlushE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>PCPlus4D</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>5</td>
  <td class=xl73 style='border-left:none'>SrcA2D</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>6</td>
  <td class=xl73 style='border-left:none'>SrcB2D</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>7</td>
  <td class=xl73 style='border-left:none'>RsD</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>8</td>
  <td class=xl73 style='border-left:none'>RtD</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>9</td>
  <td class=xl73 style='border-left:none'>RdD</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>10</td>
  <td class=xl73 style='border-left:none'>ShamtD</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>11</td>
  <td class=xl73 style='border-left:none'>ImmD</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>12</td>
  <td class=xl73 style='border-left:none'>RegWriteD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>13</td>
  <td class=xl73 style='border-left:none'>RegDstD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>14</td>
  <td class=xl73 style='border-left:none'>MemWriteD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>15</td>
  <td class=xl73 style='border-left:none'>MemToRegD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>16</td>
  <td class=xl73 style='border-left:none'>ALUControlD</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>17</td>
  <td class=xl73 style='border-left:none'>ALUSrcD</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>18</td>
  <td class=xl73 style='border-left:none'>StartD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>19</td>
  <td class=xl73 style='border-left:none'>IsJJalD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>20</td>
  <td class=xl73 style='border-left:none'>IsJrJalrD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>21</td>
  <td class=xl73 style='border-left:none'>IsLbSbD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>22</td>
  <td class=xl73 style='border-left:none'>IsLhShD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>23</td>
  <td class=xl73 style='border-left:none'>IsUnsignedD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>24</td>
  <td class=xl73 style='border-left:none'>HiLoWriteD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>25</td>
  <td class=xl73 style='border-left:none'>HiLoD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>26</td>
  <td class=xl73 style='border-left:none'>IsShamtD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>27</td>
  <td class=xl73 style='border-left:none'>MdOpD</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>28</td>
  <td class=xl73 style='border-left:none'>PCPlus8E</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>29</td>
  <td class=xl73 style='border-left:none'>SrcA2E</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>30</td>
  <td class=xl73 style='border-left:none'>SrcB2E</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>31</td>
  <td class=xl73 style='border-left:none'>RsE</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>32</td>
  <td class=xl73 style='border-left:none'>RtE</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>33</td>
  <td class=xl73 style='border-left:none'>RdE</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>34</td>
  <td class=xl73 style='border-left:none'>ShamtE</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>35</td>
  <td class=xl73 style='border-left:none'>ImmE</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>36</td>
  <td class=xl73 style='border-left:none'>RegWriteE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>37</td>
  <td class=xl73 style='border-left:none'>RegDstE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>38</td>
  <td class=xl73 style='border-left:none'>MemWriteE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>39</td>
  <td class=xl73 style='border-left:none'>MemToRegE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>40</td>
  <td class=xl73 style='border-left:none'>ALUControlE</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>41</td>
  <td class=xl73 style='border-left:none'>ALUSrcE</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>42</td>
  <td class=xl73 style='border-left:none'>StartE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>43</td>
  <td class=xl73 style='border-left:none'>IsJJalE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>44</td>
  <td class=xl73 style='border-left:none'>IsJrJalrE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>45</td>
  <td class=xl73 style='border-left:none'>IsLbSbE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>46</td>
  <td class=xl73 style='border-left:none'>IsLhShE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>47</td>
  <td class=xl73 style='border-left:none'>IsUnsignedE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>48</td>
  <td class=xl73 style='border-left:none'>HiLoWriteE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>49</td>
  <td class=xl73 style='border-left:none'>HiLoE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>50</td>
  <td class=xl73 style='border-left:none'>IsShamtE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>51</td>
  <td class=xl73 style='border-left:none'>MdOpE</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.1.3.3所示为RegM模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.1.3 RegM模块的定义接口</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>clk<span
  style='mso-spacerun:yes'> </span></td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>rst</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>PCPlus8E</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>ALUOutE</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>5</td>
  <td class=xl73 style='border-left:none'>WriteDataE</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>6</td>
  <td class=xl73 style='border-left:none'>RtE<span
  style='mso-spacerun:yes'> </span></td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>7</td>
  <td class=xl73 style='border-left:none'>WriteRegE</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>8</td>
  <td class=xl73 style='border-left:none'>RegWriteE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>9</td>
  <td class=xl73 style='border-left:none'>MemWriteE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>10</td>
  <td class=xl73 style='border-left:none'>MemToRegE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>11</td>
  <td class=xl73 style='border-left:none'>IsJJalE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>12</td>
  <td class=xl73 style='border-left:none'>IsJrJalrE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>13</td>
  <td class=xl73 style='border-left:none'>IsLbSbE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>14</td>
  <td class=xl73 style='border-left:none'>IsLhShE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>15</td>
  <td class=xl73 style='border-left:none'>IsUnsignedE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>16</td>
  <td class=xl73 style='border-left:none'>PCPlus8M</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>17</td>
  <td class=xl73 style='border-left:none'>ALUOutM</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>18</td>
  <td class=xl73 style='border-left:none'>WriteDataM</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>19</td>
  <td class=xl73 style='border-left:none'>RtM</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>20</td>
  <td class=xl73 style='border-left:none'>WriteRegM</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>21</td>
  <td class=xl73 style='border-left:none'>RegWriteM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>22</td>
  <td class=xl73 style='border-left:none'>MemWriteM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>23</td>
  <td class=xl73 style='border-left:none'>MemToRegM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>24</td>
  <td class=xl73 style='border-left:none'>IsJJalM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>25</td>
  <td class=xl73 style='border-left:none'>IsJrJalrM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>26</td>
  <td class=xl73 style='border-left:none'>IsLbSbM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>27</td>
  <td class=xl73 style='border-left:none'>IsLhShM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>28</td>
  <td class=xl73 style='border-left:none'>IsUnsignedM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.1.3.4所示为RegW模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.1.4 RegW模块定义接口</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>clk<span
  style='mso-spacerun:yes'> </span></td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>rst</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>PCPlus8M</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>ALUOutM</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>5</td>
  <td class=xl73 style='border-left:none'>ReadDataM</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>6</td>
  <td class=xl73 style='border-left:none'>WriteRegM</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>7</td>
  <td class=xl73 style='border-left:none'>RegWriteM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>8</td>
  <td class=xl73 style='border-left:none'>MemToRegM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>9</td>
  <td class=xl73 style='border-left:none'>IsJJalM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>10</td>
  <td class=xl73 style='border-left:none'>IsJrJalrM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>11</td>
  <td class=xl73 style='border-left:none'>IsUnsignedM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>12</td>
  <td class=xl73 style='border-left:none'>BEOutM</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>13</td>
  <td class=xl73 style='border-left:none'>PCPlus8W</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>14</td>
  <td class=xl73 style='border-left:none'>ALUOutW</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>15</td>
  <td class=xl73 style='border-left:none'>ReadDataW</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>16</td>
  <td class=xl73 style='border-left:none'>WriteRegW</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>17</td>
  <td class=xl73 style='border-left:none'>RegWriteW</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>18</td>
  <td class=xl73 style='border-left:none'>MemToRegW</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>19</td>
  <td class=xl73 style='border-left:none'>IsJJalW</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>20</td>
  <td class=xl73 style='border-left:none'>IsJrJalrW</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>21</td>
  <td class=xl73 style='border-left:none'>IsUnsignedW</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>22</td>
  <td class=xl73 style='border-left:none'>BEOutW</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.1.3.5所示为RegFile模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.1.5 RegFile模块定义接口</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>clk</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>rst</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>WE3</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>A1</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>第 一个读寄存器地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>5</td>
  <td class=xl73 style='border-left:none'>A2</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>第 二个读寄存器地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>6</td>
  <td class=xl73 style='border-left:none'>A3</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>第 三 个读寄存器地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>7</td>
  <td class=xl73 style='border-left:none'>WD3</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>要写入的数据</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>8</td>
  <td class=xl73 style='border-left:none'>SrcAD</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td rowspan=2 class=xl71 style='border-top:none'>从寄存器读出的数据</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>9</td>
  <td class=xl73 style='border-left:none'>SrcBD</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
 </tr>
</table>

## 3.2	数据转发流水线实现
### 3.2.1	数据冲突检测
<p><font size = 4 face = 宋体>
&emsp;&emsp;如2.3节所述，对于非load-use的RAW真数据相关，可采用重定向技术避免流水线暂停直待数据写回。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;本设计使用6路并发比较进行RAW相关检测，其中4路是为了检测ID段读寄存器（最多两个）的编号和EX段、MEM段写寄存器编号是否相同，另外2路并发比较是如果ID段读寄存器编号为0的话，即使检测到与前面两条指令的写寄存器编号相同也不必重定向，因为0号寄存器内容永远为0。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;本设计使用Verilog实现数据冲突检测如下。
</size>
</p>

```
  assign ForwardAD = ((RsD == WriteRegM) && RegWriteM && (IsJJalM || IsJrJalrM) && (WriteRegM != 5'b00000)) ? 2'b11 :
                     ((RsD == WriteRegM) && RegWriteM && (WriteRegM != 5'b00000)) ? 2'b01 :
                     ((RsD == WriteRegW) && RegWriteW && (WriteRegW != 5'b00000)) ? 2'b10 : 2'b00 ;
  assign ForwardBD = ((RtD == WriteRegM) && RegWriteM && (WriteRegM != 5'b00000)) ? 2'b01 :
                     ((RtD == WriteRegW) && RegWriteW && (WriteRegW != 5'b00000)) ? 2'b10 : 2'b00 ;
  assign ForwardAE = ((RsE == WriteRegM) && RegWriteM && (WriteRegM != 5'b00000)) ? 2'b01 :
                     ((RsE == WriteRegW) && RegWriteW && (WriteRegW != 5'b00000)) ? 2'b10 : 2'b00 ;
  assign ForwardBE = ((RtE == WriteRegM) && RegWriteM && (WriteRegM != 5'b00000)) ? 2'b01 :
                     ((RtE == WriteRegW) && RegWriteW && (WriteRegW != 5'b00000)) ? 2'b10 : 2'b00 ;
  assign ForwardM  = ((RtM == WriteRegW) && RegWriteW && (WriteRegW != 5'b00000)) ? 1 : 0;

```

### 3.2.2	数据旁路
<p><font size = 4 face = 宋体>
&emsp;&emsp;在上一节中，本设计构建数据冲突检测机制得到了重定向信号，仅有信号是不足以完成重定向的工作，还必须增加新的数据旁路才能实现重定向：通过加入4个二路选择器将MEM段和WB段数据在发生数据冒险时通过旁路送到对应位置。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;本设计使用Verilog实现数据重定向如下。
</size>
</p>

```
module MUX2 #(parameter WIDTH = 32)
             (input  [WIDTH-1:0] d0, d1, 					//双路选择器
              input              s, 
              output [WIDTH-1:0] y);

  assign y = s ? d1 : d0; 
  
endmodule

module MUX3 #(parameter WIDTH = 32)							//三路选择器
             (input  [WIDTH-1:0] d0, d1, d2,
              input  [1:0]       s, 
              output [WIDTH-1:0] y);

  assign y = s[1] ? d2 : (s[0] ? d1 : d0); 
  
endmodule

module MUX4 #(parameter WIDTH = 32)							//四路选择器
             (input  [WIDTH-1:0] d0, d1, d2, d3,
              input  [1:0]       s, 
              output [WIDTH-1:0] y);

  assign y = s[1] ? (s[0] ? d3 : d2) : (s[0] ? d1 : d0); 
  
endmodule
```

### 3.3	气泡式流水线实现
<p><font size = 4 face = 宋体>
&emsp;&emsp;最后，介绍如何实现解决load-use冲突与分支冲突。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;load-use冲突必须在ID段检测，具体操作是：在EX段插入一个气泡，后暂停IF和ID段流水线，如此便能使lw指令访存结束后在WB段进行重定向。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;对于分支指令，本设计采用的是静态预测失败的方式进行处理：总是假定分支失败，在EX段得到分支结果，若分支失败，则非顺序代码被加载执行；若分支成功，则需要清除误取的指令并从分支目标处重新取值执行。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;本设计使用Verilog实现起泡式流水如下。
</size>
</p>

```
  assign NPCD = (IsJJalD)           ? {PCPlus4D[31:28], ImmD_26, 2'b00} :
                (IsJrJalrD)         ? Reg_32 :
                (BranchD && CompD)  ? PCPlus4D + ImmD_32 : PCPlus4D + 4;
  assign IsJBrD = ((BranchD && CompD) || IsJJalD || IsJrJalrD);
```

<p><font size = 4 face = 宋体>
&emsp;&emsp;至此，本设计已经实现了全冒险处理机制的五段流水CPU。为了便于介绍下一步的工作，此处給出本设计使用所构建全冒险处理机制的五段流水CPU的Verilog实现的模块接口，部分模块的定义接口已在3.1.3节展示，此处不赘述。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.1所示为ALU模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.1 ALU模块定义接口</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>A</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>操作数A</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>B</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>操作数B</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>ALUControlE</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>算术或逻辑指令操作符</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>ALUOutE</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>算术或逻辑输出</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.2所示为BECtrl模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.2 BECtrl模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>ByteOffset</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>DM低二位地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>IsLhShM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>IsLbSbM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>BEOutM</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>DM字节写入控制信号</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.3所示为Comp模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.3 Comp模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>A</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>操作数A</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>B</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>操作数B</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>CompOpD</td>
  <td class=xl71 style='border-left:none'>3</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>比较运算符</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>CompD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>比较结果</td>
 </tr>
</table>


<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.4所示为Ctrl模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.4 Ctrl模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>OpD</td>
  <td class=xl71 style='border-left:none'>6</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>输入指令的OPCode，指定是哪种寄存器运算</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>FunctD</td>
  <td class=xl71 style='border-left:none'>6</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>输入指令的FunctCode，32位指令的FunctD段</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>RtD</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>写回寄存器的数据流的选择信号</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>RegWriteD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>指令译码阶段（ID）寄存器写输出</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>5</td>
  <td class=xl73 style='border-left:none'>MemWriteD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>指令译码（ID）存储器写</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>6</td>
  <td class=xl73 style='border-left:none'>MemToRegD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>指令译码阶段（ID）存储器向寄存器</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>7</td>
  <td class=xl73 style='border-left:none'>RegDstD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>指令译码阶段（ID）写回寄存器的地址的选择信号</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>8</td>
  <td class=xl73 style='border-left:none'>BranchD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>分支指令</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>9</td>
  <td class=xl73 style='border-left:none'>IsJJalD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>跳转指令</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>10</td>
  <td class=xl73 style='border-left:none'>IsJrJalrD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>寄存器跳转指令</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>11</td>
  <td class=xl73 style='border-left:none'>IsLbSbD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>12</td>
  <td class=xl73 style='border-left:none'>IsLhShD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>13</td>
  <td class=xl73 style='border-left:none'>IsUnsignedD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>14</td>
  <td class=xl73 style='border-left:none'>HiLoWriteD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>15</td>
  <td class=xl73 style='border-left:none'>HiLoD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>16</td>
  <td class=xl73 style='border-left:none'>IsMdD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>17</td>
  <td class=xl73 style='border-left:none'>IsShamtD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>18</td>
  <td class=xl73 style='border-left:none'>MdOpD</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>19</td>
  <td class=xl73 style='border-left:none'>ALUControlD</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>20</td>
  <td class=xl73 style='border-left:none'>ALUSrcD</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>21</td>
  <td class=xl73 style='border-left:none'>ExtOpD</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>22</td>
  <td class=xl73 style='border-left:none'>CompOpD</td>
  <td class=xl71 style='border-left:none'>3</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.5所示为DM_4k模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.5 DM_4k模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>A</td>
  <td class=xl71 style='border-left:none'>10</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>WD</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>写入的数据</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>clk</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>时钟信号</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>WE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>数据存储器写使能</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>5</td>
  <td class=xl73 style='border-left:none'>BE</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>写回的位置</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>6</td>
  <td class=xl73 style='border-left:none'>RD</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>写回输出</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.6所示为DMExt模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.6 DMExt模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>ReadDataW</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>读取即将写的32位数据</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>BEOutW</td>
  <td class=xl71 style='border-left:none'>4</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>指定读取数据</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>IsUnsignedW</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>是否无符号数</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>DMExtOutW</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>扩展后的32位数</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.7所示为Ext模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.7 Ext模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>ImmD_16</td>
  <td class=xl71 style='border-left:none'>16</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>无符号扩展</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>ExtOpD</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>扩展类型</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>ImmD_32</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>立即数</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.8所示为Hazard模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.8 Hazard模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>OpD</td>
  <td class=xl71 style='border-left:none'>6</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>读寄存器周期时的操作数</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>RsD</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td rowspan=5 class=xl71 style='border-top:none'>ID / EX 阶段的地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>RtD</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>RsE</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>5</td>
  <td class=xl73 style='border-left:none'>RtE</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>6</td>
  <td class=xl73 style='border-left:none'>RtM</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>7</td>
  <td class=xl73 style='border-left:none'>WriteRegE</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td rowspan=3 class=xl71 style='border-top:none'>EX / MEM / WB 阶段的地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>8</td>
  <td class=xl73 style='border-left:none'>WriteRegM</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>9</td>
  <td class=xl73 style='border-left:none'>WriteRegW</td>
  <td class=xl71 style='border-left:none'>5</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>10</td>
  <td class=xl73 style='border-left:none'>ALUSrcD</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>11</td>
  <td class=xl73 style='border-left:none'>IsJrJalrD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>12</td>
  <td class=xl73 style='border-left:none'>BranchD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>13</td>
  <td class=xl73 style='border-left:none'>IsMdD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>14</td>
  <td class=xl73 style='border-left:none'>BusyE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>15</td>
  <td class=xl73 style='border-left:none'>IsJJalM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>16</td>
  <td class=xl73 style='border-left:none'>IsJrJalrM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>17</td>
  <td class=xl73 style='border-left:none'>MemToRegE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>18</td>
  <td class=xl73 style='border-left:none'>MemToRegM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>19</td>
  <td class=xl73 style='border-left:none'>MemWriteM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>20</td>
  <td class=xl73 style='border-left:none'>RegWriteE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>21</td>
  <td class=xl73 style='border-left:none'>RegWriteM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>22</td>
  <td class=xl73 style='border-left:none'>RegWriteW</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>23</td>
  <td class=xl73 style='border-left:none'>StallF</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>IF阶段访存阶段是否暂停</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>24</td>
  <td class=xl73 style='border-left:none'>StallD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>ID阶段访存阶段是否暂停</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>25</td>
  <td class=xl73 style='border-left:none'>FlushE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>EX阶段是否清除流水线</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>26</td>
  <td class=xl73 style='border-left:none'>ForwardAD</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>27</td>
  <td class=xl73 style='border-left:none'>ForwardBD</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>28</td>
  <td class=xl73 style='border-left:none'>ForwardAE</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>29</td>
  <td class=xl73 style='border-left:none'>ForwardBE</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>30</td>
  <td class=xl73 style='border-left:none'>ForwardM</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.9所示为IM_2k模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.9 IM_2k模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>A</td>
  <td class=xl71 style='border-left:none'>9</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>RD</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>指令</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.10所示为MD模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.10 MD模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>clk</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>时钟信号</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>rst</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>复位信号</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl73 style='border-left:none'>D1</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>操作数D1</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>4</td>
  <td class=xl73 style='border-left:none'>D2</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>操作数D2</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>5</td>
  <td class=xl73 style='border-left:none'>WE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>写使能</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>6</td>
  <td class=xl73 style='border-left:none'>HiLo</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>HI/LO写使能</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>7</td>
  <td class=xl73 style='border-left:none'>Start</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>运行使能</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>8</td>
  <td class=xl73 style='border-left:none'>Op</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>操作符</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>9</td>
  <td class=xl73 style='border-left:none'>Busy</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>标记是否忙</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>10</td>
  <td class=xl73 style='border-left:none'>Hi</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>HI寄存器输出</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>11</td>
  <td class=xl73 style='border-left:none'>Lo</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>LO寄存器输出</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.11所示为MIPS模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.11 </font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl67 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl73 style='border-left:none'>clk</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>时钟信号</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl73 style='border-left:none'>rst</td>
  <td class=xl71 style='border-left:none'>2</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>复位信号</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.12所示为MUX2模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.12 MUX2模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>1</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>d0</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td rowspan=2 class=xl66 width=367 style='width:275pt'>数据或地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>2</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>d1</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>3</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>s</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>非冲突信号</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>4</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>y</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>非冲突的数据或地址</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.13所示为MUX3模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.13 MUX3模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>1</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>d0</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td rowspan=3 class=xl66 width=367 style='width:275pt'>数据或地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>2</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>d1</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>3</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>d2</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>4</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>s</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>非冲突信号</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>5</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>y</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>非冲突的数据或地址</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.14所示为MUX4模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.14 MUX4模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>1</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>d0</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td rowspan=4 class=xl66 width=367 style='width:275pt'>数据或地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>2</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>d1</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>3</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>d2</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>4</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>d3</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>5</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>s</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>非冲突信号</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>6</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>y</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>非冲突的数据或地址</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.15所示为NPC模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.15 NPC模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>1</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>PCPlus4D</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>PC+4 的值</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>2</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>ImmD_26</td>
  <td class=xl71 style='border-left:none'>26</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>指令的低 26 位</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>3</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>ImmD_32</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td rowspan=2 class=xl71 style='border-top:none'>分支指令的偏移</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>4</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>Reg_32</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=38 style='mso-height-source:userset;height:28.8pt'>
  <td height=38 class=xl66 width=47 style='height:28.8pt;
  width:35pt'>5</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>IsJJalD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td rowspan=4 class=xl75 width=367 style='width:275pt'>跳转类型<br>
    分支类型</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>6</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>IsJrJalrD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>7</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>BranchD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>8</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>CompD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>9</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>NPCD</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl71 style='border-left:none'>下一条指令的地址</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>10</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>IsJBrD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl71 style='border-left:none'>是否跳转/分支指令</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.16所示为PC模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.16 PC模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl67 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl72 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>1</td>
  <td class=xl73 style='border-left:none'>clk</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>2</td>
  <td class=xl73 style='border-left:none'>rst</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>3</td>
  <td class=xl73 style='border-left:none'>En</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>&nbsp;</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>4</td>
  <td class=xl73 style='border-left:none'>IsJBrD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>是否跳转、分支指令</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>5</td>
  <td class=xl73 style='border-left:none'>NPCD</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl73 style='border-left:none'>PC按条件自增后的值</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>6</td>
  <td class=xl73 style='border-left:none'>PCPlus4F</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>实际的PC（下一条指令处）值</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>7</td>
  <td class=xl73 style='border-left:none'>PCF</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl67 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl73 style='border-left:none'>PC当前值</td>
 </tr>
</table>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如表3.3.17所示为StartCtrl模块的定义接口。
</size>
</p>

<table border=1 cellpadding=0 cellspacing=0 width=611 style='border-collapse:
 collapse;table-layout:fixed;width:458pt'>
 <caption><font size=3>表 3.3.17 StartCtrl模块的接口描述</font></caption>
 <col class=xl67 width=96 style='mso-width-source:userset;mso-width-alt:3413;
 width:72pt'>
 <col class=xl67 width=515 style='mso-width-source:userset;mso-width-alt:18318;
 width:386pt'>
<tr height=21 style='height:15.6pt'>
  <td height=21 class=xl66 width=47 style='height:15.6pt;
  width:35pt'>序 号</td>
  <td class=xl66 width=96 style='border-left:none;width:72pt'>接
  口 名</td>
  <td class=xl66 width=98 style='border-left:none;width:74pt'>宽度（bit）</td>
  <td class=xl75 width=79 style='border-left:none;width:59pt'>输入/输出</td>
  <td class=xl66 width=367 style='border-left:none;width:275pt'>作
  用</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>1</td>
  <td class=xl71 style='border-left:none'>InstrD</td>
  <td class=xl71 style='border-left:none'>32</td>
  <td class=xl66 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl71 style='border-left:none'>ID阶段读入的指令</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>2</td>
  <td class=xl71 style='border-left:none'>BusyE</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl66 width=79 style='border-left:none;width:59pt'>输入</td>
  <td class=xl71 style='border-left:none'>指示是否忙</td>
 </tr>
 <tr height=21 style='height:15.6pt'>
  <td height=21 class=xl71 style='height:15.6pt;border-top:none'>3</td>
  <td class=xl71 style='border-left:none'>StartD</td>
  <td class=xl71 style='border-left:none'>1</td>
  <td class=xl66 width=79 style='border-left:none;width:59pt'>输出</td>
  <td class=xl71 style='border-left:none'>是否启动控制模块</td>
 </tr>
</table>

# 4	实验过程与调试
## 4.1	实验环境
### 4.1.1	硬件
<p><font size = 4 face = 宋体>
&emsp;&emsp;Dell G579笔记本电脑。
</size>
</p>

### 4.1.2	软件
<p><font size = 4 face = 宋体>
&emsp;&emsp;ModelSim SE-64 2019.2、MARS 4.5、Vivado 2020.1。
</size>
</p>

## 4.2	测试用例与功能测试
<p><font size = 4 face = 宋体>
&emsp;&emsp;在完成全冒险处理机制的五段流水CPU的设计与实现后，下面通过实验对本设计所构建CPU进行样例测试与功能测试，样例测试是指检测CPU在运行指定程序时的输出与标准输出以及CPU各时序状态与预期是否一致。本设计所用MIPS测试样例程序在附录中給出。功能测试是指CPU能否达到设计的性能指标。
</size>
</p>

### 4.2.1	样例测试
<p><font size = 4 face = 宋体>
&emsp;&emsp;本设计所构建CPU支持MIPS-C3指令集的全部50条指令，接下来选择有代表性的指令进行波形测试。为了便于实验结果对比，将同CPU的波形输出同MARS 4.5运行相同程序的结果进行对比。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>1）理想流水线测试</b>
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912160427125.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.1 MARS界面的寄存器-1</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912160615743.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.2 MARS界面的寄存器-2</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/202009121607130.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.3 MARS界面的寄存器-3</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912160759918.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.4 ModelSim的仿真波形图-1</div>
</center>
<br>


<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912161018483.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.5 MARS界面的寄存器-4</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912161053351.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.6 MARS界面的寄存器-5</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912161259730.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.7 MARS界面的寄存器-6</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912161346187.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.8 ModelSim的仿真波形图-2</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/2020091216142240.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.9 MARS界面的寄存器-7</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如图4.1.1.1至图4.1.1.9所示，使用无冲突的MIPS程序对CPU进行理想流水线测试，由实验结果可知，本设计所构建CPU运行样例程序所得波形与MARS显示的寄存器数据完全一致。
</size>
</p>


<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>2）跳转指令测试（以j指令为例）
</b>
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912161754468.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.10 MARS界面的寄存器-8</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912161838999.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.11 ModelSim的仿真波形图-3</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912161923861.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.12 ModelSim的仿真波形图-4</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912161958405.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.13 MARS界面的MIPS指令执行-1</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如图4.1.1.10至图4.1.1.13所示，使用含j跳转指令的MIPS程序对CPU进行测试，程序运行到第11个时钟周期时发生了指令跳转，由实验结果可知，本设计所构建CPU运行样例程序所得波形与MARS显示的寄存器数据完全一致。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>3）数据前推
</b>
</size>
</p>


<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912162320722.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.14 ModelSim的仿真波形图-5</div>
</center>
<br>


<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/2020091216241350.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.15 MARS界面的寄存器-9</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912162458545.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.16 ModelSim的仿真波形图-6</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如图4.1.1.14至图4.1.1.16所示，使用含需要进行数据前推方能计算得出正确结果的MIPS程序进行CPU测试，程序运行到第6个周期时发生了数据前推。由实验结果可知，最终，本设计所构建CPU运行样例程序所得波形与MARS显示的寄存器数据完全一致。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>4）数据冲突
</b>
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>i. load-use冲突
</b>
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912162921213.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.17 MARS界面的寄存器-10</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912163030360.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.18 MARS界面的MIPS指令执行-2</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912163107296.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.19 MARS界面的寄存器-11</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912163135816.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.20 MARS界面的MIPS指令执行-3</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912163432563.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.21 MARS界面的寄存器-12</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912163507818.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.22 MARS界面的存储器-1</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912163625100.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.23 MARS界面的MIPS指令执行-4</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912163702326.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.24 MARS界面的寄存器-13</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912163738916.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.25 MARS界面的存储器-2</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912164050270.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.26 MARS界面的MIPS指令执行-5</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/2020091216413563.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.27 MARS界面的寄存器-14</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/2020091216423728.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.28 MARS界面的MIPS指令执行-6</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912164308671.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.29 MARS界面的寄存器-15</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/2020091216435734.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.30 MARS界面的MIPS指令执行-7</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912164426496.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.31 MARS界面的存储器-3</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912164456654.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.32 ModelSim的仿真波形图-7</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如图4.1.1.17至图4.1.1.32所示，使用含load-use冲突的MIPS程序进行CPU测试，程序运行到第3个周期时发生了load-use冲突。由实验结果可知，最终，本设计所构建CPU运行样例程序所得波形与MARS显示的寄存器数据完全一致。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>ii. sw-lw冲突
</b>
</size>
</p>


<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/2020091216490017.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.33 MARS界面的MIPS指令执行-8</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912164933362.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.34 MARS界面的寄存器-16</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912165007912.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.35 MARS界面的存储器-4</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912165251871.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.36 ModelSim的仿真波形图-8</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/2020091216533631.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.37 MARS界面的寄存器-17</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912165416353.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.38 MARS界面的MIPS指令执行-9</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912165451377.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.39 MARS界面的寄存器-18</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912165704197.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.40 MARS界面的MIPS指令执行-10</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912165737164.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.41 MARS界面的存储器-5</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/2020091216580455.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.42 ModelSim的仿真波形图-9</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如图4.1.1.33至图4.1.1.42所示，使用含sw-lw冲突的MIPS程序进行CPU测试，程序运行到第7个周期时发生了load-use冲突。由实验结果可知，最终，本设计所构建CPU运行样例程序所得波形与MARS显示的寄存器数据完全一致。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>iii. RAW冲突
</b>
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912170223484.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">4.2.1.43 MARS界面的寄存器-19</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912170459339.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.44 MARS界面的MIPS指令执行-11</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912170533644.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.45 MARS界面的寄存器-20</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912170601614.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.46 MARS界面的MIPS指令执行-12</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912170635235.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.47 ModelSim的仿真波形图-10</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/2020091217070670.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.48 MARS界面的寄存器-21</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912170734472.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.49 MARS界面的MIPS指令执行-13</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912170805679.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.50 ModelSim的仿真波形图-11</div>
</center>
<br>

<p><font size = 4 face = 宋体>
&emsp;&emsp;如图4.1.1.43至图4.1.1.50，使用含sw-lw冲突的MIPS程序进行CPU测试，程序运行到第14个周期时发生了load-use冲突。由实验结果可知，最终，本设计所构建CPU运行样例程序所得波形与MARS显示的寄存器数据完全一致。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>iv. 结构冲突
</b>
</size>
</p>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912171146365.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.51 MARS界面的寄存器-22</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912171216189.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.52 MARS界面的MIPS指令执行-14</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912171244610.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.53 MARS界面的寄存器-23</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912171316508.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.54 MARS界面的MIPS指令执行-15</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912171442519.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.55 MARS界面的寄存器-24</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912171522104.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.56 MARS界面的MIPS指令执行-16</div>
</center>
<br>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://img-blog.csdnimg.cn/20200912171555696.png">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">图 4.2.1.57 ModelSim的仿真波形图-12</div>
</center>
<br>

## 4.3	性能分析
<p><font size = 4 face = 宋体>
&emsp;&emsp;1）采用单周期方式（开源项目代码）下执行benchmark时钟周期数为：2698，而采用静态分支预测分支失败的五段流水方式benchmark时钟周期数为：3870。假定单周期方式时钟周期为五段流水方式的5倍，则加速比为：
</size>
</p>

$$S = \frac{2698 \times 5\Delta t}{3870 \times \Delta t} \approx 3.49 $$

<p><font size = 4 face = 宋体>
&emsp;&emsp;2）正确进行数据转发与阻塞；
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;3）执行乘法需5个时钟周期，执行除法需10个时钟周期，该功能使用一个计数器模拟实现。

</size>
</p>

## 4.4	主要故障与调试
### 4.4.1	保持复位信号为1导致时序不正确
<p><font size = 4 face = 宋体>
&emsp;&emsp;复位信号reset只应在系统开始运行后的极短时间内为1，其后处于0状态。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>故障现象：</b>寄存器中未观察到预期的数据，时序“不正确”。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>原因分析：</b>复位信号reset用于将系统恢复至初始状态，只能在系统开始运行后的一小段时间内为1，使系统各个指标回复至初始态，便于数据的载入以及系统的正式运行。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>解决方案：</b>reset最初赋值为1，至#5时改赋为0，此后若系统未遇特殊异常引起系统中断复位，则不再改变。
</size>
</p>

### 4.4.2	load-use冲突的处理未达预期效果

<p><font size = 4 face = 宋体>
&emsp;&emsp;因未在ID段检测信号，导致一条lw指令被挤掉。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>故障现象：</b>指令执行后，寄存器中的数据并非预期的值。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>原因分析：</b>benchmark中存在两条lw指令的目的寄存器编号分别与后一条指令两个源寄存器编号相同的情况，若在EX段才检测load-use冲突，则因为插入一个气泡，将第一条lw挤出流水线，故EX段时钟有效时，其需要的数据已经正确写回，从而无法通过定向技术获得。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>解决方案：</b>按照标准的处理方法，将load-use的检测提前至ID段。
</size>
</p>

### 4.4.3	算术右移计算结果不正确
<p><font size = 4 face = 宋体>
&emsp;&emsp;如题，CPU在进行算术右移时所得计算结果不正确。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>故障现象：</b>ALU在进行算术右移运算时，输入数据与控制信号都正确，但结果不对。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>原因分析：</b>查阅有关资料得知被移位的对象必须定义为reg类型，而本设计实现起初是直接对输出信号进行assign赋值。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>解决方案：</b>使用reg类型的临时变量进行转存。
</size>
</p>

### 4.4.4	其他BUG
<p><font size = 4 face = 宋体>
&emsp;&emsp;实验过程中遇到了各种各样稀奇古怪的bug，不一而足，“不足为外人道也”。
</size>
</p>


<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>故障现象：</b>数组越界、语法错误、负载没有读进去，等等。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>原因分析：</b>对Verilog不熟悉、前期准备不足。
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;<b>解决方案：</b>查阅有关资料，求助同学。
</size>
</p>

# 5	总结与心得体会
## 5.1	课设总结
<p><font size = 4 face = 宋体>
&emsp;&emsp;本设计实现了全冒险处理机制的MIPS五段流水CPU，可以运行MIPS-C3指令集的所有指令，比较全面地解决了数据冲突、结构冲突、控制冲突等问题，支持数据阻塞和转发。本设计所实现的CPU执行乘法需要5个时钟周期，执行除法需要10个时钟周期，该功能使用一个计数器模拟实现。CPU在进行乘除法运算时，可以并行执行其他非乘除法指令，冒险检测单元会根据ID级的指令类型以及乘除法部件的busy值来判断是否对流水线进行暂停和冲刷。为和测试代码保持一致，方便进行测试，本设计所实现CPU支持一个延迟槽。值得一提的是，为简化控制信号，没有对ALU单独设置控制器，而是直接在主控制器中发出ALU控制信号。
</size>
</p>

## 5.2	课设心得
<p><font size = 4 face = 宋体>
&emsp;&emsp;在完成本次课程设计得过程中，我们通过查阅有关资料，完成了既定任务。早在大三《计算机组成原理》开课时，陈田老师就曾说过“这门课有一个课设，是让你们自己造一台CPU”，那时觉得是天方夜谭：本科生怎么可能做得出来CPU？后面经过学习与主动了解，明白了“造CPU”的具体要求，畏难情绪少了许多。计组算得上是对于课程考试并不十分擅长的我学得比较透彻的一门课，个中原因可能是自身对硬件比较喜爱吧。本次课程设计的一个遗憾是：我们没有足够的时间来将CPU烧到FPGA上面，完成硬件演示，功底还是差了许多，李荣浩的那句经典歌词“要是能从来，我要学李白……”。总之，CPU课设挺好玩的，哈哈哈！😄
</size>
</p>

<p><font size = 4 face = 宋体>
&emsp;&emsp;老师真帅，給个优吧！🤣😂良也行啊……QwQ
</size>
</p>

# 参考文献
<p><font size = 4 face = 宋体>
[1]唐朔飞. 计算机组成原理（第2版）[M]. 北京：高等教育出版社，2008.<br>
[2]张晨曦，王志英等. 计算机体系结构（第2版）[M]. 北京：高等教育出版社，2014.<br>
[3] https://zh.wikipedia.org/zh-hans/%E6%B5%81%E6%B0%B4%E7%BA%BF_(%E8%AE%A1%E7%AE%97%E6%9C%BA)<br>
[4]雷思磊. 自己动手写CPU[M]. 北京：电子工业出版社，2014.<br>
[5]https://zh.wikipedia.org/wiki/%E5%86%92%E9%99%A9_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84)<br>
[6]王泽坤. MIPS架构CPU设计及SoC系统实现[D]. 沈阳：东北大学，2014.<br>
[7]蔡晓燕，袁春风，张泽生. MIPS架构多周期CPU的设计[D]. 计算机教育：第17期：93-96，2014.<br>
[8] 李东泽，曹凯宁，曲明，王富昕. 五级流水线ＲISC-V处理器软硬件协同仿真验证[J]. 吉林大学学报（信息科学版）：Vol. 35 NO.6：612-616，2017.<br>
[9]Charles Price. MIPS IV Instruction Set[S]. MIPS Technologies, Inc. 1995.<br>
</size>
</p>

# 附录
<p><font size = 4 face = 宋体>
&emsp;&emsp;项目源码已经托管至GitHub网站，网址：<br>
</size>
</p>

&emsp;&emsp;<https://github.com/25thengineer/HFUT_2020_MIPS_CPU>


<p><font size = 4 face = 宋体>
&emsp;&emsp;测试文件TESTBENCH：
</size>
</p>

```
#case 1
	.org 0x0
	.set noat
	.set noreorder			#不进行指令调度
	.set nomacro
	.global __start
__start:
	# 注意，MIPS编译时，会将rs和rt的二进制位置互换，写法上是rt,rs，指令码是opcode rs rt(写入rt)
	# 
	# 用nop和ori指令作为开始标志
	# start code
	# 3400 0000 3400 0000
	# ori $0, $0, 0x0000
	# ori $0, $0, 0x0000
	# 注意由于，编译装入问题，此处不用原先指令开头
	# 3403 8000
	# ori  $3, $0, 0x8000

	# 此处开始书写代码
	##################
	# Test Subset 2  #
	ori $v0, $0, 0x1234
	lui $v1, 0x9876
	addi $a0, $v0, 0x3456
	addi $a1, $v1, -1024
	xori $a2, $v0, 0xabcd
	slti $a1, $a0, 0x34
	slti $a1, $v0, -1
	andi $a3, $a2, 0x7654
	slti $t0, $v1, 0x1234 
	
	
	##################
	# Test Subset 1  #
	sub $t0, $v1, $v0
	xor $t1, $t0, $v1
	add $t2, $t1, $t0
	add $t2, $t2, $v0
	sub $t3, $t2, $v1
	nor $t4, $t3, $t2
	or  $t5, $t3, $t2
	and $t6, $t3, $t2
	slt $s3, $t5, $t4
	slt $s4, $t5, $t4
	
	### Test for shift
	sll $t0, $t0, 3
	srl $t1, $t0, 16
	sra $t2, $t0, 29
	addi $t3, $0, 0x3410


	# end code
	# 3400 0000 3400 0000
	ori $0, $0, 0x0000
	ori $0, $0, 0x0000
```

```
#case 2
	.org 0x0
	.set noat
	.set noreorder			#不进行指令调度
	.set nomacro
	.global __start
__start:
	# 注意，MIPS编译时，会将rs和rt的二进制位置互换，写法上是rt,rs，指令码是opcode rs rt(写入rt)
	# 
	# 用nop和ori指令作为开始标志
	# start code
	# 3400 0000 3400 0000
	# ori $0, $0, 0x0000
	# ori $0, $0, 0x0000
	# 注意由于，编译装入问题，此处不用原先指令开头
	# 3403 8000
	# ori  $3, $0, 0x8000

	# 此处开始书写代码
	addi $18 $0 1
	addi $19 $0 2
	add $17 $18 $19
	sub $20 $17 $18
	add $21 $19 $17


	# end code
	# 3400 0000 3400 0000
	ori $0, $0, 0x0000
	ori $0, $0, 0x0000
```

```
#case 3
	.org 0x0
	.set noat
	.set noreorder			#不进行指令调度
	.set nomacro
	.global __start
__start:
	# 注意，MIPS编译时，会将rs和rt的二进制位置互换，写法上是rt,rs，指令码是opcode rs rt(写入rt)
	# 
	# 用nop和ori指令作为开始标志
	# start code
	# 3400 0000 3400 0000
	# ori $0, $0, 0x0000
	# ori $0, $0, 0x0000
	# 注意由于，编译装入问题，此处不用原先指令开头
	# 3403 8000
	# ori  $3, $0, 0x8000

	# 此处开始书写代码
	addi $s5,$zero,7
	addi $sp,$sp,-12
	sw $s5,4($sp)#load-use hazard
	lw $s5,4($sp)
	sw $s5,8($sp)

	addi $s1,$zero,5
	sw $s1,0($sp)#sw-lw hazard
	lw $s1,0($sp)
	or $s4,$zero,$s1


	beq $zero,$zero,label #beq
	addi $s2,$zero,5
label:
	addi $s2,$zero,6
	addi $s3,$zero,7
	add $s4,$s3,$s2 #Data hazard
	add $s7,$s2,$zero #Structure hazard


	# end code
	# 3400 0000 3400 0000
	ori $0, $0, 0x0000
	ori $0, $0, 0x0000
```

```
#case 4
	.org 0x0
	.set noat
	.set noreorder			#不进行指令调度
	.set nomacro
	.global __start
__start:
	# 注意，MIPS编译时，会将rs和rt的二进制位置互换，写法上是rt,rs，指令码是opcode rs rt(写入rt)
	# 用ori指令作为开始标志
	# start code
	# ori $0, $0, 0x0000
	# 3400 0000
	# 此处开始书写代码
	.org 0x0000
	ori $0, $0, 0x0000
	
	# 真正的代码
	ori $3, $0, 0x8000 		# [1] $3 = 0x00008000
	sll $3, 16				# [2] $3左移16位，$3 = 0x80000000
	ori	$1, $0, 0x0001		# [3] $1 = 0x1
	b 	s1					# [4] 转移到s1处
	ori $1, $0, 0x0002		# [5] $1 = 0x2,延迟槽指令
b1:
	ori	$1, $0, 0x1111
	ori $1, $0, 0x1100
 
	.org 0x20
s1 :
	ori	$1, $0, 0x0004		# [6] $1 = 0x4
	movz $2, $1, $0 		# [7] $2 = $1 = 0x4
	bal s2					# [8] 转移到s2处，同时设置$31为0x30
	srlv $3, $3, $1			# [9] $3右移 $1 = 0x4 位,$3 = 0x08000000，延迟槽指令
	ori	$1, $0, 0x1100		# 地址为0x30，保存在$31中
	ori	$1, $0, 0x1111
	bne $1, $0, s3
	nop
	ori	$1, $0, 0x1100
	ori $1, $0, 0x1111

	.org 0x50
s2:
	ori	$1, $0,  0x0003		# [10] $1 = 0x3
	beq	$3, $3,  s3			# [11] $3等于$3，发生转移，目的地址是s3
	or  $1, $31, $0			# [12] $1 = 0x30,延迟槽指令
	ori	$1, $0,  0x1111
	ori $1, $0,  0x1100
b2:
	addi $2, $1, 0x0015 	# [16] $2 = $1(0x6) + 0x15 = 0x1b
	ori	$1, $0, 0x2			# [17] $1 = 0x2,
	mul $4, $1, $2 			# [18] $4 = $1(0x6) * $2(0x1b)
	ori $1, $1, 0xffff
	sll $1, $1, 16
	addi $1, $1, 0xffe3
	bgtz $2, s4				# [19] 此时$1为0x8，大于0，所以转移至标号s4处
	addi $1, $1, 0x1000
	
	.org 0x90
s3:
	ori $1, $0, 0x0005		# [13] $1 = 0x5
	bgez $1, b2				# [14] 此时$1为0x5 大于0,转移至前面的b2处
	ori $1, $0, 0x0006		# [15] $1 = 0x6，延迟槽指令
	ori	$1, $0, 0x1111 
	ori $1, $0, 0x1100
	nop 

s4:
	ori $2, $0, 0xffff      # [20]  $2 = 0x0000ffff
	sll $2, $2, 16			# $2 = 0xffff0000
	ori $2, $2, 0xfff1 		# $2 = -15 (0xfffffff1)
	ori $3, $0, 0x11 		# $3 = 17  (0x00000011)
	div  $0, $2, $3			# hi = 0xfffffff1
							# lo = 0x0					
	divu $0, $2, $3			# hi = 0x00000003
							# lo = 0x0f0f0f0e						
	div  $0, $3, $2			# hi = 0x02
							# lo = 0xffffffff
							# 
next0:
	j next0 # [21] 指令运行结束，等待退出
	nop


	# end code
	# 3400 0000 3400 0000
	ori $0, $0, 0x0000
	ori $0, $0, 0x0000
```